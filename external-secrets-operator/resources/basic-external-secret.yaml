apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: example
  namespace: workflow-playground
spec:
  refreshInterval: 1h0m0s
  secretStoreRef:
    name: secretstore-sample
    kind: SecretStore
  target:
    name: secret-to-be-created
    creationPolicy: Owner
  # AWS Secrets Manager secret `provider-key` should contain JSON with properties:
  #   {"AWS_ACCESS_KEY_ID": "...", "AWS_SECRET_ACCESS_KEY": "..."}
  # ESO will extract each JSON property as a separate Kubernetes secret key
  data:
  - secretKey: AWS_ACCESS_KEY_ID
    remoteRef:
      key: provider-key
      property: AWS_ACCESS_KEY_ID
  - secretKey: AWS_SECRET_ACCESS_KEY
    remoteRef:
      key: provider-key
      property: AWS_SECRET_ACCESS_KEY
